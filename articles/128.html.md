---
title: 梶研 [3次元空間の点を2次元平面に落とし込む]
category: kajilab/2024年度/05月
tags: date:2024-05-14
created_at: '2024-05-10T10:17:55+09:00'
updated_at: '2024-05-13T19:26:31+09:00'
published: true
number: 128
---

# 3次元空間の点を2次元平面に落とし込む

## 出席率
- 3年セミナー：??%

## スケジュール
### 短期的な予定
- [ ] mocopi と お料理センシング
    - [x] シーンとランドマークを決める(~2月上旬)
    - [x] SVM で動作判別する
    - [ ] 機械学習を深める
        - [x] 機械学習の手法を知る
        - [x] 使う手法を決める
        - [x] データセットを探す
        - [x] LSTM してみる
        - [x] 主成分分析してみる
        - [x] クラスタリング
        - [ ] 自己相関
    - [ ] お料理センシング
        - [x] お料理でどんな動作があるかを知る
        - [x] レシピを決める
        - [ ] センシングする
        - [ ] ?
    - [ ] 論文書く
    - [ ] 発表
- [ ] BookWorm
    - [x] Pasori と デスクトップアプリを接続する(技術検証)
    - [x] nfc読み込み機能 & 画面を作る
    - [ ] API と連携させる
    - [x] 管理者画面を作る

### 長期的な予定
- ~?月 シーン検知?をする
- ~?月 論文を書く
- ~?月 論文発表したい


## 進捗報告
### 目的
料理中の動作を mocopi を使ってセンシングする。
このデータから最終的に位置推定を行う。
- 一定の区間でどの動作をしているかを当てる (クラス分類)
- 料理の手順を元にシーン検知を補正する
    - 例) 焼く動作 → 卵割る動作 はおかしい
- 位置とシーンを相補的に補正する
    - 例) 冷蔵庫の前で焼く動作 はおかしい

### 前回
平面出せた. 2次元に変換したい
<img width="411" alt="image.png (76.0 kB)" src="https://img.esa.io/uploads/production/attachments/21347/2024/05/10/148142/c35bbc15-d0d0-40e5-8823-9d9a58e9080b.png">

### 2次元に落とし込むための平面出す別の案
1. y軸と並行な腰を通る直線($L_1$)を取る
1. その直線から最も遠い点($P_1$)を取る
1. Aから最も遠い点($P_2$)を取る
1. $L_1$ と並行で $P_1$ $P_2$を結ぶ直線($L_2$) と重なる平面を使う

→ 非連続的になる可能性があるためやめた
例) 腕を直角に伸ばす, 右手先が一番遠い→少しずつ縮めると左手先が一番遠くなった時平面が急激に変化する

### 別の案2
1. 上記の図でいう xz 平面に落とし込む
1. xz平面上で近似直線を引く
1. y軸方向に伸ばして平面にする

軸を一つ気にしなくてよくなって扱いやすい

### 3次元空間の点を2次元平面に落とし込む
ChatGPTいわく以下の三つがある
- 射影法
- 回転法
- 最近接点法

`射影変換` の一つぽい
- 正射影
- 投視射影
がある
https://sonson.jp/blog/2006/04/04/opengl-6/
今回は `正射影`

```py
# 最小二乗法による平面の推定
Xtil = np.c_[np.ones(len(points)), points[:, 0], points[:, 1]]
A = np.dot(Xtil.T, Xtil)
b = np.dot(Xtil.T, points[:, 2])
w = linalg.solve(A, b)

# 平面の方程式
def plane_eq(x, y):
    return w[0] + w[1] * x + w[2] * y

# 平面上への点の射影
projected_points = np.array([[point[0], point[1], plane_eq(point[0], point[1])] for point in points])
```

---

平面の公式

$$
ax + by + cz + d = 0
$$

アフィン変換すごい(関係ない）


## 進路関係


## 余談
